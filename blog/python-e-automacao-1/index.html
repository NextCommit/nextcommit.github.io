<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Automação 1 &#8211; Next Commit</title>
<meta name="description" content="Python para te facilitar a vida">
<meta name="keywords" content="produtividade, automação, python">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Automação 1">
<meta name="twitter:description" content="Python para te facilitar a vida">
<meta name="twitter:site" content="@miguelpoeira">


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://nextcommit.github.io/images/automation.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="pt-PT">
<meta property="og:type" content="article">
<meta property="og:title" content="Automação 1">
<meta property="og:description" content="Python para te facilitar a vida">
<meta property="og:url" content="https://nextcommit.github.io/blog/python-e-automacao-1/">
<meta property="og:site_name" content="Next Commit">





<link rel="canonical" href="https://nextcommit.github.io/blog/python-e-automacao-1/">
<link href="https://nextcommit.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Next Commit Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://nextcommit.github.io/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="https://nextcommit.github.io/assets/js/vendor/html5shiv.min.js"></script>
  <script src="https://nextcommit.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="https://nextcommit.github.io/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<link rel="apple-touch-icon" sizes="57x57" href="https://nextcommit.github.io/images/icons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://nextcommit.github.io/images/icons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://nextcommit.github.io/images/icons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://nextcommit.github.io/images/icons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://nextcommit.github.io/images/icons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://nextcommit.github.io/images/icons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://nextcommit.github.io/images/icons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://nextcommit.github.io/images/icons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://nextcommit.github.io/images/icons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="https://nextcommit.github.io/images/icons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://nextcommit.github.io/images/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://nextcommit.github.io/images/icons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://nextcommit.github.io/images/icons/favicon-16x16.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="https://nextcommit.github.io/" >Início</a></li>
		  
		    
		    <li><a href="https://nextcommit.github.io/indice" >Índice</a></li>
		  
		    
		    <li><a href="https://nextcommit.github.io/arquivo" >Arquivo</a></li>
		  
		    
		    <li><a href="https://nextcommit.github.io/sobre" >Sobre</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	
		<div class="wrap">
			<a href="https://nextcommit.github.io/" class="site-logo" rel="home" title="Next Commit"><img src="https://nextcommit.github.io/images/logo.png" width="200" height="200" alt="Next Commit logo" class="animated fadeInDown"></a>
		</div>
	
</header><!-- /.masthead -->


<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    <div class="feature-img"><img src="https://nextcommit.github.io/images/automation.jpg" class="entry-feature-image" alt="Automação 1" ></div>
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <i class="fa fa-tags"></i><li><a href="https://nextcommit.github.io/indice/#produtividade" title="Assunto produtividade">produtividade</a></li><li><a href="https://nextcommit.github.io/indice/#automação" title="Assunto automação">automação</a></li><li><a href="https://nextcommit.github.io/indice/#python" title="Assunto python">python</a></li>
        </ul>
        
          <h1 class="entry-title post-title">Automação 1 </h1>
        
      </header>
      <footer class="entry-meta">
        
        
          <img src="https://www.gravatar.com/avatar/af7c5974dd0600be354e14f045463a0e?s=128&d=identicon&r=PG" class="bio-photo" alt="Gabriel Candal bio photo"></a>
        
        <span class="author vcard">por <a href="mailto:gabrielcandal@gmail.com"><span class="fn">Gabriel Candal</span></a></span>
        <span>
        
        <a href="https://linkedin.com/in/gcandal" title="Gabriel Candal on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
        <a href="http://stackexchange.com/users/1282930/gcandal" title="Gabriel Candal on StackExchange" target="_blank"><i class="fa fa-stack-exchange fa-2x"></i></a>
        <a href="https://github.com/gcandal" title="Gabriel Candal on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
        </span>
        <span class="entry-date date published"><time datetime="2016-03-10"><i class="fa fa-calendar-o"></i> 10 março 2016</time></span>
        
        <span class="entry-comments"><i class="fa fa-comment-o"></i> <a href="#disqus_thread">Comentar</a></span>
        
      </footer>
      <div class="entry-content">
        <p>Como falei <a href="/blog/git-checkout-gcandal/">num post anterior</a>, automatizar<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> tem benefícios, principalmente se estivermos a falar para pessoas que já sabem programar e que por isso não têm que passar pela aprendizagem do que pode ou não ser automatizado (apesar de que normalmente a resposta é: tudo).</p>

<p>De todas as linguagens que podíamos usar para este tipo de tarefa, a minha preferida (e reparem que não disse a melhor, porque isso não existe) é <strong>Python</strong><sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup>. Porquê?</p>

<ul>
  <li>É <strong>dinamicamente tipada</strong>. Ou seja, uma mesma variável pode ter mais do que um tipo durante o seu ciclo de vida. Era uma string e passou a ser um inteiro? Paciência, vive com isso, porque o compilador não se vai queixar. Sacrifica verificação da validade do programa em benifício do tempo de escrita, o que <strong>para scripts</strong> me parece um bom tradeoff. Se começas a sentir-te perdido pela falta de tipos provavelmente o teu programa cresceu demais, por isso lembra-te:</li>
</ul>

<p><img src="http://www.azquotes.com/picture-quotes/quote-this-is-the-unix-philosophy-write-programs-that-do-one-thing-and-do-it-well-write-programs-douglas-mcilroy-81-95-07.jpg" alt="UNIX philosophy" /></p>

<ul>
  <li>É fácil de aprender, não só por ser bastante alto nível e expressiva, ou pela sintaxe simples, mas também pelas biblitoecas de interface intuitiva. Queres ler um ficheiro de texto com nomes de alunos de duas cadeiras e imprimi-los no formato certo sem duplicados?</li>
</ul>

<p><code>print [name.capitalize() for name in set(input()) ^ set(input())]</code></p>

<ul>
  <li>Bibliotecas para tudo e mais alguma coisa! Manipulação de imagem (pillow), vídeo (moviepy, que serve como camada superior ao ffmpeg), HTTP (requests ou Mechanize, que “emula” um browser até certo ponto), extração de informação de páginas HTML (BeautifulSoup) ou compressão (zipfile). Como navegar numa estrutura de diretórios e rodar todos os PNGs 45º?</li>
</ul>

<p><code>[PIL.Image.open(file).rotate(45).save() for file in glob.glob('/target/**/**/*.png')]</code></p>

<p>Tudo isto pode, e deve, ser usado para melhoria constante dos processos internos das empresas (ou pessoais, se forem como <a href="https://www.jitbit.com/alexblog/249-now-thats-what-i-call-a-hacker/">o administrador de sistemas que tirava cafés por SSH</a>).</p>

<p>Há uma tarefa rotineria que a equipa de design tem que fazer, como renomear os ficheiros exportados pelo Photoshop, centrar imagens verticalmente e depois comprimir tudo? Python.</p>

<p>A malta de gestão todos os dias verifica se as taxas de câmbio estão dentro de um certo limite do que está definido? Python. Exemplo:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">mechanize</span>
<span class="kn">import</span> <span class="nn">bs4</span>

<span class="k">def</span> <span class="nf">get_price</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">country</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
    <span class="n">browser</span> <span class="o">=</span> <span class="n">mechanize</span><span class="o">.</span><span class="n">Browser</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">country</span><span class="p">:</span> <span class="n">browser</span><span class="o">.</span><span class="nb">open</span><span class="p">(</span><span class="s">"</span><span class="si">%</span><span class="s">s/change_country/</span><span class="si">%</span><span class="s">s"</span> <span class="o">%</span> <span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">country</span><span class="p">))</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="s">"html.parser"</span><span class="p">)</span>
    <span class="n">meta_tag</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">"meta"</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">"property"</span><span class="p">:</span><span class="s">"og:price:amount"</span><span class="p">})</span>
    <span class="n">price</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">meta_tag</span><span class="p">[</span><span class="s">"content"</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">","</span><span class="p">,</span> <span class="s">"."</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">price</span>

<span class="k">def</span> <span class="nf">get_rate</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">country</span> <span class="o">=</span> <span class="s">"PT"</span><span class="p">):</span>
    <span class="n">base_price</span> <span class="o">=</span> <span class="n">get__price</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">rated_price</span> <span class="o">=</span> <span class="n">get_price</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">country</span><span class="o">=</span><span class="n">country</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">rated_price</span> <span class="o">/</span> <span class="n">base_price</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="mf">0.05</span>

    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">get_rate</span><span class="p">(</span><span class="n">our_url</span><span class="p">)</span> <span class="o">-</span> <span class="n">get_rate</span><span class="p">(</span><span class="n">authority_url</span><span class="p">))</span> <span class="o">&gt;</span> <span class="n">delta</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"aye"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"ney"</span><span class="p">)</span></code></pre></figure>

<p>E há muitos outros exemplos.</p>

<p><img src="https://www.doppnet.com/gfx/2013-11-09-automation-meme.jpg" alt="automate all the things" /></p>

<p>Em termos de Software Engineering propriamente dito, este conceito está na origem do movimento de DevOps, que tenta aplicar esta coisas ao ciclo de desenvolvimento de software até chegar a um ponto de continuous deployment, em que cada entrada de código nova no repositório faz com que uma série de scripts de automação (testes, análise estática, deployment, …) sejam executados. Podem perguntar mais sobre isto ao <a href="http://cmcmteixeira.github.io/">Carlos Teixeira</a>, que está a fazer uma tese em “Towards DevOps Practices and Patterns from the Portuguese Startup Scene”.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>automatizar ~= scripting <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Há várias implementações da linguagem e para todos os gostos: CPython (a implementação de referência), PyPy (inclui um compilador JIT para melhorias na performance em runtime), Jython (JVM) ou IronPython (.NET). Num contexto de automação, sempre que falar em Python, estou-me a referir a CPython. A vantagem em relação a outras implementações é ter um tempo de startup geralmente mais curto e vir instalado por defeito na maioria das distribuições Linux (por exemplo, o Ubuntu depende bastante da linguagem). <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

        <!-- comentarios -->
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->

    
    <div id="related_post">
      <div class="next-article" style="background-image: url('https://nextcommit.github.io/images/automation.jpg');">

        <div class="wrap">
          <div class="overlay">

          <div class="constrained">
            <p class="next">Artigo Sugerido: </p>
            <h3 class="title"><a href="/blog/python-e-automacao-2/" class="next-article-link">Automação 2</a></h3>
            <p class="subhead">Python para te facilitar a vida, mais rápido</p>
          </div>

        </div>
        </div>
      </div>
    </div>
    

    
    <div class="entry-wrapper">
      <div class="entry-content center-margin">
        <div id="disqus_thread"></div><!-- /#disqus_thread -->
        
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'nextcommit'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </div>
    </div>
    

  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2017 Next Commit.</span>
<!-- <div class="social-icons">
	<a href="https://twitter.com/miguelpoeira" title="Next Commit on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	
	
	
	
	<a href="https://github.com/promgamer" title="Next Commit on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="https://nextcommit.github.io/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div> --> <!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'https://nextcommit.github.io';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://nextcommit.github.io/assets/js/scripts.min.js"></script>
<script src="https://nextcommit.github.io/assets/js/plugins/infinite_scroll.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 'https://www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-71051399-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'https://stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



</body>
</html>
